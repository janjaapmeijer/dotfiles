{{- if .install_apps -}}
#!/bin/bash

# add keyrings
# VSCodium
wget -qO - https://gitlab.com/paulcarroty/vscodium-deb-rpm-repo/raw/master/pub.gpg \
  | gpg --dearmor \
  | sudo dd of=/usr/share/keyrings/vscodium-archive-keyring.gpg
echo 'deb [signed-by=/usr/share/keyrings/vscodium-archive-keyring.gpg] https://download.vscodium.com/debs vscodium main' \
  | sudo tee /etc/apt/sources.list.d/vscodium.list

# Brave browser
sudo curl -fsSLo /usr/share/keyrings/brave-browser-archive-keyring.gpg https://brave-browser-apt-release.s3.brave.com/brave-browser-archive-keyring.gpg
echo 'deb [signed-by=/usr/share/keyrings/brave-browser-archive-keyring.gpg] https://brave-browser-apt-release.s3.brave.com/ stable main' \
  | sudo tee /etc/apt/sources.list.d/brave-browser-release.list
# sudo apt install brave-browser

# install Joplin
wget -O - https://raw.githubusercontent.com/laurent22/joplin/dev/Joplin_install_and_update.sh | bash

# Script to install Debian applications for new machine
{{ if eq .chezmoi.os "linux" -}}
  sudo apt update && sudo apt upgrade
  {{ range .packages.linux.apt -}}
  sudo apt install {{ . | quote }}
  {{ end -}}
{{- end -}}

# Install Miniconda
if ! conda --version  
then
  mkdir -p ~/miniconda3
  wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/Downloads/Miniconda3-latest-Linux-x86_64.sh
  bash ~/Downloads/Miniconda3-latest-Linux-x86_64.sh -b -u -p ~/miniconda3
  rm -rf ~/Downloads/Miniconda3-latest-Linux-x86_64.sh
  echo 'export PATH=~/miniconda3/bin:$PATH' >> ~/.bash_profile
  source ~/.bash_profile
fi
conda create --name system

{{- end -}}
